(function(){for(var m,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},p="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this,q=["String","prototype","repeat"],ba=0;ba<q.length-1;ba++){var ca=q[ba];ca in p||(p[ca]={});p=p[ca]}
var da=q[q.length-1],fa=p[da],ga=fa?fa:function(a){var b;if(null==this)throw new TypeError("The 'this' value for String.prototype.repeat must not be null or undefined");b=this+"";if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var c="";a;)if(a&1&&(c+=b),a>>>=1)b+=b;return c};ga!=fa&&null!=ga&&aa(p,da,{configurable:!0,writable:!0,value:ga});var ha=this;
function z(a,b,c){a=a.split(".");c=c||ha;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]?c=c[d]:c=c[d]={}:c[d]=b}
function ia(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function B(a){return"array"==ia(a)}function F(a){return"string"==typeof a}function ja(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var ka="closure_uid_"+(1E9*Math.random()>>>0),la=0;function ma(a,b,c){return a.call.apply(a.bind,arguments)}
function na(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function G(a,b,c){G=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ma:na;return G.apply(null,arguments)}var J=Date.now||function(){return+new Date};
function oa(a,b){function c(){}c.prototype=b.prototype;a.ya=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.xa=function(a,c,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[c].apply(a,g)}};var K={};function pa(a,b){return function(c){return void 0!==c?(b.call(this,c),this):a.call(this)}}z("VERSION","0.1.0.106",K);function L(a,b,c,d,e){return{siteId:a,seqId:b,context:c,invCount:d||0,load:e||null}}z("operation",L,K);function M(){return{vector:{},size:0}}M.l=function(a,b){var c=a.vector[b];c||(c=a.vector[b]=M.h(),a.size++);return c};M.h=function(a,b,c){return{seqId:a||0,invCluster:b||{},invClusterSize:c||0}};M.b=function(a,b){var c=a.vector[b];return c?c.seqId:0};M.g=function(a,b,c){return(a=a.vector[b])&&a.invCluster[c]||0};
M.a=function(a,b,c,d){var e;F(b)?(e=b,c=c||0,b=d||0):(e=b.siteId,c=b.seqId,b=b.invCount);a=M.l(a,e);a.seqId=Math.max(c,a.seqId);b&&(e=a.invCluster[c],e||(e=0,a.invClusterSize++),a.invCluster[c]=Math.max(b,e))};M.j=function(a,b,c){var d;F(b)?(d=b,b=c||0):(d=b.siteId,b=b.seqId);a=M.l(a,d);a.seqId==b&&a.seqId--;b in a.invCluster&&(delete a.invCluster[b],a.invClusterSize--)};
M.clone=function(a){var b=M(),c;for(c in a.vector){var d=a.vector[c],e=d.invCluster,f={},g;for(g in e)f[g]=e[g];b.vector[c]=M.h(d.seqId,f,d.invClusterSize)}b.size=a.size;return b};M.f=function(a,b){if(a.size<b.size)return!1;for(var c in b.vector){var d=a.vector[c],e=b.vector[c];if(!d||d.seqId<e.seqId||d.invClusterSize<e.invClusterSize)return!1;var d=d.invCluster,e=e.invCluster,f;for(f in e)if((d[+f]||0)<e[+f])return!1}return!0};
M.i=function(a,b){if(a.size!=b.size)return!1;for(var c in b.vector){var d=a.vector[c],e=b.vector[c];if(!d||d.seqId!=e.seqId||d.invClusterSize!=e.invClusterSize)return!1;var d=d.invCluster,e=e.invCluster,f;for(f in e)if((d[+f]||0)!=e[+f])return!1}return!0};M.m=function(a,b){var c=b.seqId,d=a.vector[b.siteId];return d&&d.seqId>=c&&(d.invCluster[c]||0)>=b.invCount};M.o=function(a,b){return!M.m(a.context,b)&&!M.m(b.context,a)};
M.c=function(a,b){var c={},d=0,e;for(e in a.vector){var f=a.vector[e],g=b.vector[e],h=f.seqId,k=f.invCluster;g?(f=g.seqId,g=g.invCluster):(f=0,g={});var l=[],n=[],r={},u=0,t;for(t in k){t=+t;var D=k[t],E=D-(g[t]||0);0<E&&E&1&&(t>f?(r[t]=!0,u++):D&1?l.push(t):n.push(t))}if(f<h||u||l.length||n.length)l.sort(),n.sort(),c[e]={J:f+1,M:h,s:l,v:n,oa:u?r:null},d++}return d?c:null};M.getSeqId=M.b;M.getInvCount=M.g;M.include=M.a;M.exclude=M.j;M.clone=M.clone;M.includes=M.f;M.equals=M.i;M.isParallelTo=M.o;
M.subtract=M.c;z("context",M,K);function qa(a,b,c){this.j=a;this.g=b;this.a=c?c:M();this.f=M.clone(this.a);this.c={};this.i={};this.h=0;for(var d in this.a.vector)N(this,d)}function ra(a,b){var c=a.siteId;return c==b.siteId?M.b(a.context,c)-M.b(b.context,c):c>b.siteId?1:-1}function sa(a,b){return b-a}
qa.prototype.s=function(a){var b=a.ops,c=a.context,d=a.siteId;N(this,d);var e={},f;if(B(b))for(f=M.b(c,d),c=0;c<b.length;c++)f++,e[f]=1;else if(ja(b))for(f in b)e[f]=b[f]+1;b=M.clone(this.a);a={docId:a.docId,siteId:d,context:b,ops:e};ta(this,a);d=ua(this);return{toSend:a,toExec:d.F,missing:d.D}};
function ua(a){for(var b=va(a,a.f,a.a),c=b[0],d=b[1],b=[],e=0;e<c.length;e++){var d=wa(a,c[e],a.a,d),f=d[0],d=d[1];if(f)M.a(a.a,f),null!=f.load&&b.push(f);else break}if(d){a={};for(var g in d){var c=d[g],e=[],h;for(h in c)e.push(+h);e.length&&(e.sort(),a[g]=e)}}else a=null;return{F:b,D:a}}
function ta(a,b){if(M.c(b.context,a.f))a.b||(a.b=[]),a.b.push(b);else{xa(a,b);if(a.b&&a.b.length){var c=a.b;c.sort(ra);for(var d=[],e=0;e<c.length;e++)b=c[e],xa(a,b)||d.push(b);a.b=d.length?d:null}return!0}return!1}
function xa(a,b){var c=b.ops,d=b.siteId;N(a,d);var e;if(B(c)){var f=a.c[d];f||(f=a.c[d]=new ya);var g=M.clone(b.context),h=M.b(g,d);for(e=0;e<c.length;e++){var k=L(d,++h,M.clone(g),0,c[e]),l=f,n=k,r=n.seqId,u=!1;if(!l.c[r-l.a]&&(isNaN(l.a)||r==l.a-1?(l.c.unshift(O(n)),l.a=r,u=r==l.h+1):r==l.a+l.c.length?(l.c.push(O(n)),u=r==l.g-1):r<l.a?(l.b?l.b.push(n):l.b=[n],l.h=Math.max(l.h,r)):(l.f?l.f.push(n):l.f=[n],l.g=Math.min(l.g,r)),u)){if(n=l.b.length){for(l.b.sort(za);r=l.b[l.b.length-1];)if(r.seqId==
l.a-1)l.c.unshift(O(r)),l.b.pop(),l.a--;else break;l.h=l.b.length?l.b[l.b.length].seqId:-Infinity}if(n=l.f.length){l.f.sort(za);for(var u=l.a+l.c.length,t=0;t<n;t++)if(r=l.f[t],r.seqId==u)l.c.push(O(r)),u++;else{l.f.splice(t,n-t);break}t==n?(l.f.length=0,l.g=Infinity):l.g=l.f[0].seqId}}M.a(g,k);M.a(a.f,k)}}else if(ja(c))for(e in c)M.a(a.f,d,+e,c[e])}function N(a,b){a.i[b]||(a.i[b]=!0,a.h++)}
function wa(a,b,c,d){if(!B(c)&&(d=va(a,c,b.context,d),c=d[0],d=d[1]))return[null,d];var e,f;if(null!=b.load){if(c.length&&b.invCount&1){a:{e=a.g(b);var g=M.clone(b.context);M.j(g,b);e=L(b.siteId,b.seqId,g,0,e);g=[];f=[];for(var h=0;h<c.length;h++)M.o(e,c[h])?g.push(c[h]):f.push(c[h]);if(g.length)if(c=wa(a,e,g,d),e=c[0],d=c[1],e)g=e.context,M.a(g,b.siteId,b.seqId,0),b.load=a.g(e),b.context=g;else{d=[null,f,d];break a}d=[b,f,d]}b=d[0];c=d[1];d=d[2];if(!b)return[null,d]}for(e=0;e<c.length;e++){f=c[e];
var k=a.c[f.siteId];if(g=k)a:{g=f;h=b.context;if((k=k.c[g.seqId-k.a]||null)&&k.cache)for(var k=k.cache,l=0;l<k.length;l++){var n=k[l];if(!(!!(g.invCount&1)^n.ja)&&M.i(h,k[l].context)){g=L(g.siteId,g.seqId,M.clone(h),g.invCount,n.load);break a}}g=null}if(g=g||null)f=g;else if(d=wa(a,f,b.context,d),f=d[0],d=d[1],!f)return[null,d];null!=b.load&&null!=f.load&&(g=a.j(b,f),h=a.j(f,b),b.load=g,f.load=h);M.a(b.context,f);P(a,b);M.a(f.context,b);P(a,f)}}else if(c.length)for(e=0;e<c.length;e++)f=c[e],M.a(b.context,
f),P(a,b),M.a(f.context,b),P(a,f);return[b,d]}
function va(a,b,c,d){var e=M.c(b,c);if(e){var f,g={},h=d||null,k;for(k in e){var l=e[k],n=l.J,r=l.M,u=[],t=h&&h[k]||[],D=a.c[k]||null;l.s.sort(sa);l.v.sort();var E=l.s.concat(l.v);for(f=0;f<E.length;f++)d=E[f],Aa(a,D,k,d,u,t,M.g(b,k,d),!1);f=l.oa;for(d=n;d<=r;d++)Aa(a,D,k,d,u,t,M.g(b,k,d),!!f&&d in f);u.length&&(g[k]=u);t.length&&(h||(h={}),h[k]=t)}a=[g,h];b=a[0];var C,e={};for(C in b)e[C]=0;g=[];for(c=M.clone(c);C=Ba(b,e,c);){k=b[C];d=e[C];h=k[d];do g.push(h),M.a(c,h),d=++e[C],h=k[d];while(d<k.length&&
M.f(c,h.context))}a[0]=g;return a}return[[],null]}function Ba(a,b,c){for(var d in a){var e=a[d],f=b[d];if(f<e.length&&M.f(c,e[f].context))return d}return null}function Aa(a,b,c,d,e,f,g,h){var k;if(k=b)k=(b=b.c[d-b.a]||null)?L(c,d,M.clone(b.context),0,b.load):null;(c=k||null)?(h?c.load=null:g&1&&(c.load=a.g(c),M.a(c.context,c)),c.invCount=g,e.push(c)):f[d]=!0}function P(a,b){var c=a.c[b.siteId];c&&c.cache(b,a.h)}
function ya(){this.c=[];this.a=NaN;this.b=null;this.h=-Infinity;this.f=null;this.g=Infinity}function za(a,b){return a.seqId-b.seqId}ya.prototype.cache=function(a,b){var c=this.c[a.seqId-this.a]||null;if(c){c.cache||(c.cache=[]);var d={load:a.load,ja:!!(a.invCount&1),context:M.clone(a.context)};c.A=(c.A+1)%b;c.cache[c.A]=d}return!!c};function O(a){return{load:a.load,context:M.clone(a.context),A:-1,cache:null}};function Q(a,b){if(!(this instanceof Q))return new Q(a,b);this.f=a;this.b={};this.g=b||50;this.a=[];this.c=[]}m=Q.prototype;m.V=function(a,b){var c=[],d={},e=null;if(ja(a))for(var f in a)e=Ca(this,f,a[f],c,d,e);else F(a)&&(e=Ca(this,a,b,c,d,e));this.a.push(c);this.a.length>=this.g&&this.a.shift();this.c.length=0;return R(c,d,e)};
m.Y=function(a){for(var b={},c=null,d=0;d<a.length;d++){var e=a[d],f=b,g=e.docId,h=this.b[g];if(!h)throw"Cannot update a document that is not registered";if(ta(h,e))e=ua(h),e={toExec:e.F,missing:e.D};else{var e=M.c(e.context,h.a),h={},k=void 0;for(k in e){for(var l=e[k],n=[],r=l.J;r<=l.M;r++)n.push(r);h[k]=n}e={toExec:[],missing:h}}f[g]=(f[g]||[]).concat(e.toExec);if(f=e.missing)c||(c={}),c[g]=f}return{toExec:b,missing:c}};
m.s=function(){if(this.I()){for(var a=[],b={},c=null,d=this.a.pop(),e=0;e<d.length;e++)c=Da(this,d[e],a,b,c);this.c.push(a);return R(a,b,c)}return R([],{},null)};m.v=function(){if(this.H()){for(var a=[],b={},c=null,d=this.c.pop(),e=0;e<d.length;e++)c=Da(this,d[e],a,b,c);this.a.push(a);return R(a,b,c)}return R([],{},null)};m.I=function(){return!!this.a.length};m.H=function(){return!!this.c.length};m.X=function(a,b,c,d){this.b[a]=new qa(b,c,d)};m.W=function(a){return(a=this.b[a])&&a.a||null};m.da=function(){return this.f};
m.ta=function(a){this.f=a};function Ca(a,b,c,d,e,f){var g=a.b[b];if(!g)throw"Cannot commit an operation to a document that is not registered";a=a.f;c=B(c)?c:[c];N(g,a);var h=M.clone(g.a);a={docId:b,siteId:a,context:h,ops:c};ta(g,a);g=ua(g);g={toSend:a,toExec:g.F,missing:g.D};d.push(g.toSend);e[b]=g.toExec;if(d=g.missing)f||(f={}),f[b]=d;return f}
function Da(a,b,c,d,e){var f=b.docId;a=a.b[f];if(!a)throw"Cannot undo an operation in a document that is not registered";b=a.s(b);c.push(b.toSend);d[f]=b.toExec;if(c=b.missing)e||(e={}),e[f]=c;return e}function R(a,b,c){return{toSend:a,toExec:b,missing:c}}var S=Q.prototype;S.commit=S.V;S.undo=S.s;S.redo=S.v;S.canUndo=S.I;S.canRedo=S.H;S.update=S.Y;S.register=S.X;S.getState=S.W;S.id=pa(S.da,S.ta);z("Site",Q,K);var Ea=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(F(a))return F(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};function Fa(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}var Ga="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ha(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Ga.length;f++)c=Ga[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Ia(){0!=Ja&&(this[ka]||(this[ka]=++la));this.L=this.L;this.S=this.S}var Ja=0;Ia.prototype.L=!1;function Ka(a,b){this.type=a;this.b=this.a=b};var La="closure_listenable_"+(1E6*Math.random()|0),Ma=0;function Na(a,b,c,d,e){this.listener=a;this.a=null;this.src=b;this.type=c;this.u=!!d;this.C=e;++Ma;this.w=this.B=!1}function Oa(a){a.w=!0;a.listener=null;a.a=null;a.src=null;a.C=null};function Pa(a){this.src=a;this.a={};this.b=0}function Qa(a,b,c,d,e,f){var g=b.toString();b=a.a[g];b||(b=a.a[g]=[],a.b++);var h=Ra(b,c,e,f);-1<h?(a=b[h],d||(a.B=!1)):(a=new Na(c,a.src,g,!!e,f),a.B=d,b.push(a));return a}function Sa(a,b){var c=b.type;if(!(c in a.a))return!1;var d=a.a[c],e=Ea(d,b),f;(f=0<=e)&&Array.prototype.splice.call(d,e,1);f&&(Oa(b),a.a[c].length||(delete a.a[c],a.b--));return f}
function Ta(a,b,c){var d=void 0!==b,e=d?b.toString():"",f=void 0!==c;return Fa(a.a,function(a){for(var b=0;b<a.length;++b)if(!(d&&a[b].type!=e||f&&a[b].u!=c))return!0;return!1})}function Ra(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.w&&f.listener==b&&f.u==!!c&&f.C==d)return e}return-1};var Ua="closure_lm_"+(1E6*Math.random()|0),Va={},Wa=0;function Xa(a,b,c,d,e){if(B(b))for(var f=0;f<b.length;f++)Xa(a,b[f],c,d,e);else(c=Ya(c),a&&a[La])?a.O(b,c,d,e):a&&(a=Za(a))&&(b=a.a[b.toString()],a=-1,b&&(a=Ra(b,c,!!d,e)),(c=-1<a?b[a]:null)&&"number"!=typeof c&&c&&!c.w&&((d=c.src)&&d[La]?d.G(c):(e=c.type,b=c.a,d.removeEventListener?d.removeEventListener(e,b,c.u):d.detachEvent&&d.detachEvent(e in Va?Va[e]:Va[e]="on"+e,b),Wa--,(e=Za(d))?(Sa(e,c),e.b||(e.src=null,d[Ua]=null)):Oa(c))))}
function Za(a){a=a[Ua];return a instanceof Pa?a:null}var $a="__closure_events_fn_"+(1E9*Math.random()>>>0);function Ya(a){if("function"==ia(a))return a;a[$a]||(a[$a]=function(b){return a.handleEvent(b)});return a[$a]};function T(){Ia.call(this);this.b=new Pa(this);this.wa=this}oa(T,Ia);T.prototype[La]=!0;m=T.prototype;m.removeEventListener=function(a,b,c,d){Xa(this,a,b,c,d)};function U(a,b){var c=a.wa,d=b,e=d.type||d;if(F(d))d=new Ka(d,c);else if(d instanceof Ka)d.a=d.a||c;else{var f=d,d=new Ka(e,c);Ha(d,f)}c=d.b=c;ab(c,e,!0,d);ab(c,e,!1,d)}m.K=function(a,b,c,d){return Qa(this.b,String(a),b,!1,c,d)};m.na=function(a,b,c,d){return Qa(this.b,String(a),b,!0,c,d)};
m.O=function(a,b,c,d){var e;e=this.b;a=String(a).toString();if(a in e.a){var f=e.a[a];b=Ra(f,b,c,d);-1<b?(Oa(f[b]),Array.prototype.splice.call(f,b,1),f.length||(delete e.a[a],e.b--),e=!0):e=!1}else e=!1;return e};m.G=function(a){return Sa(this.b,a)};m.ra=function(a){var b;if(this.b){b=this.b;a=a&&a.toString();var c=0,d;for(d in b.a)if(!a||d==a){for(var e=b.a[d],f=0;f<e.length;f++)++c,Oa(e[f]);delete b.a[d];b.b--}b=c}else b=0;return b};
function ab(a,b,c,d){b=a.b.a[String(b)];if(!b)return;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.w&&g.u==c){var h=g.listener,k=g.C||g.src;g.B&&a.G(g);e=!1!==h.call(k,d)&&e}}}m.ia=function(a,b){return Ta(this.b,void 0!==a?String(a):void 0,b)};function V(a,b){T.call(this);this.g=a||1;this.c=b||ha;this.h=G(this.j,this);this.i=J()}oa(V,T);V.prototype.f=!1;V.prototype.a=null;V.prototype.j=function(){if(this.f){var a=J()-this.i;0<a&&a<.8*this.g?this.a=this.c.setTimeout(this.h,this.g-a):(this.a&&(this.c.clearTimeout(this.a),this.a=null),U(this,"tick"),this.f&&(this.a=this.c.setTimeout(this.h,this.g),this.i=J()))}};function bb(a,b){T.call(this);this.m=void 0!==a?a:0;this.h=!0;this.j=this.N=!1;this.o=this.g=cb;this.T=b||null;this.a=[];this.f=null;this.l=200;this.P=1E3;this.c={loadedRequestsSent:0,successfulRequests:0,totalRequestsSent:0,emptyRequestsSent:0,abortedRequests:0,failedRequests:0,packagesSent:0}}oa(bb,T);var cb="complete";m=bb.prototype;
m.aa=function(a){void 0!==a&&(this.P=a);this.f||(this.f=new V(this.P,this.T),this.f.K("tick",this.qa,!1,this),a=this.f,a.f=!0,a.a||(a.a=a.c.setTimeout(a.h,a.g),a.i=J()))};m.ba=function(){if(this.f){var a=this.f;a.f=!1;a.a&&(a.c.clearTimeout(a.a),a.a=null)}};m.$=function(a){this.a.push.apply(this.a,a)};m.ua=function(a){this.l=a};m.ea=function(){return this.l};m.Z=function(){this.R()};
m.qa=function(){if(this.g==cb)db(this);else if(this.a.length&&this.j){if(this.i)this.i(),this.c.abortedRequests++;else throw Error("Abort requested but abort closure is not provided");db(this)}};
function db(a){var b=a.a.splice(0,Math.min(a.a.length,a.l));eb(a,b.length?"sending":"requesting-updates");b.length?U(a,{type:"before-send-updates",value:b}):U(a,{type:"before-request-updates"});var c=G(a.pa,a,b);a.i=a.U(b,a.m,c);if(!a.i)throw Error("Abort closure required");a.c.totalRequestsSent++;a.c.packagesSent++;b.length?a.c.loadedRequestsSent++:a.c.emptyRequestsSent++}
m.pa=function(a,b,c,d,e){b?(this.m=d,this.c.successfulRequests++,a&&a.length&&U(this,{type:"updates-delivered",value:a}),e&&e.length&&U(this,{type:"updates-received",value:e})):(this.c.failedRequests++,this.a=a.concat(this.a));this.h=b;this.N=c;eb(this,cb)};m.ca=function(a){this.R=a};m.sa=function(a){this.U=a};m.va=function(a){this.j=a};m.la=function(){return this.j};m.ka=function(){return this.h||!this.h&&this.N};m.ma=function(){return!this.a.length&&"sending"!=this.g&&"sending"!=this.o&&this.h};
m.ha=function(){return this.g};m.fa=function(){return this.m};function eb(a,b){a.o=a.g;a.g=b;U(a,{type:"status-changed",status:a.g,prevStatus:a.o})}m.ga=function(){return null};var W=bb.prototype;W.isOnline=W.ka;W.isUpToDate=W.ma;W.getStatus=W.ha;W.getStat=W.ga;W.start=W.aa;W.stop=W.ba;W.send=W.$;W.disconnect=W.Z;W.getPackageIndex=W.fa;W.sendFn=W.sa;W.disconnectFn=W.ca;W.hasListener=W.ia;W.listen=W.K;W.listenOnce=W.na;W.unlisten=W.O;W.unlistenByKey=W.G;W.removeAllListeners=W.ra;
W.requestAbortAllowed=pa(W.la,W.va);W.maxUpdatesCount=pa(W.ea,W.ua);z("net.Http",bb,K);function fb(){}function gb(a,b,c,d){if(b==c)return[[0,b]];"undefined"==typeof d&&(d=!0);var e=hb(b,c),f=b.substring(0,e);b=b.substring(e);c=c.substring(e);var e=ib(b,c),g=b.substring(b.length-e);b=b.substring(0,b.length-e);c=c.substring(0,c.length-e);b=jb(a,b,c,d);f&&b.unshift([0,f]);g&&b.push([0,g]);kb(a,b);return b}
function jb(a,b,c,d){var e;if(!b)return[[1,c]];if(!c)return[[-1,b]];var f=b.length>c.length?b:c,g=b.length>c.length?c:b,h=f.indexOf(g);if(-1!=h)return e=[[1,f.substring(0,h)],[0,g],[1,f.substring(h+g.length)]],b.length>c.length&&(e[0][0]=e[2][0]=-1),e;if(f=lb(b,c)){c=f[1];var k=f[3];b=f[4];e=gb(a,f[0],f[2],d);a=gb(a,c,k,d);return e.concat([[0,b]],a)}d&&(100>b.length||100>c.length)&&(d=!1);d&&(k=mb(b,c),b=k[0],c=k[1],k=k[2]);a:{var f=b,g=c,l=(new Date).getTime()+1E3,h=f.length,n=g.length,r=h+n-1,u=
64<r,t=[],D=[],E={},C={};E[1]=0;C[1]=0;for(var v,w,y={},H=!1,ea=!!y.hasOwnProperty,I=(h+n)%2,A=0;A<r&&!((new Date).getTime()>l);A++){t[A]={};for(var x=-A;x<=A;x+=2){v=x==-A||x!=A&&E[x-1]<E[x+1]?E[x+1]:E[x-1]+1;w=v-x;u&&(e=v+","+w,I&&(ea?y.hasOwnProperty(e):void 0!==y[e])&&(H=!0),I||(y[e]=A));for(;!H&&v<h&&w<n&&f.charAt(v)==g.charAt(w);)v++,w++,u&&(e=v+","+w,I&&(ea?y.hasOwnProperty(e):void 0!==y[e])&&(H=!0),I||(y[e]=A));E[x]=v;t[A][v+","+w]=!0;if(v==h&&w==n){e=nb(t,f,g);break a}if(H){D=D.slice(0,y[e]+
1);e=nb(t,f.substring(0,v),g.substring(0,w));e=e.concat(ob(D,f.substring(v),g.substring(w)));break a}}if(u)for(D[A]={},x=-A;x<=A;x+=2){v=x==-A||x!=A&&C[x-1]<C[x+1]?C[x+1]:C[x-1]+1;w=v-x;e=h-v+","+(n-w);!I&&(ea?y.hasOwnProperty(e):void 0!==y[e])&&(H=!0);for(I&&(y[e]=A);!H&&v<h&&w<n&&f.charAt(h-v-1)==g.charAt(n-w-1);)v++,w++,e=h-v+","+(n-w),!I&&(ea?y.hasOwnProperty(e):void 0!==y[e])&&(H=!0),I&&(y[e]=A);C[x]=v;D[A][v+","+w]=!0;if(H){t=t.slice(0,y[e]+1);e=nb(t,f.substring(0,h-v),g.substring(0,n-w));e=
e.concat(ob(D,f.substring(h-v),g.substring(n-w)));break a}}}e=null}e||(e=[[-1,b],[1,c]]);if(d){d=e;b=k;for(c=0;c<d.length;c++){k=d[c][1];f=[];for(g=0;g<k.length;g++)f[g]=b[k.charCodeAt(g)];d[c][1]=f.join("")}pb(a,e);e.push([0,""]);c=b=d=0;for(f=k="";d<e.length;){switch(e[d][0]){case 1:c++;f+=e[d][1];break;case -1:b++;k+=e[d][1];break;case 0:if(1<=b&&1<=c){k=gb(a,k,f,!1);e.splice(d-b-c,b+c);d=d-b-c;for(b=k.length-1;0<=b;b--)e.splice(d,0,k[b]);d+=k.length}b=c=0;f=k=""}d++}e.pop()}return e}
function mb(a,b){function c(a){for(var b="",c=0,f=-1,g=d.length;f<a.length-1;){f=a.indexOf("\n",c);-1==f&&(f=a.length-1);var u=a.substring(c,f+1),c=f+1;(e.hasOwnProperty?e.hasOwnProperty(u):void 0!==e[u])?b+=String.fromCharCode(e[u]):(b+=String.fromCharCode(g),e[u]=g,d[g++]=u)}return b}var d=[],e={};d[0]="";var f=c(a),g=c(b);return[f,g,d]}
function nb(a,b,c){for(var d=[],e=b.length,f=c.length,g=null,h=a.length-2;0<=h;h--)for(;;)if(a[h].hasOwnProperty?a[h].hasOwnProperty(e-1+","+f):void 0!==a[h][e-1+","+f]){e--; -1===g?d[0][1]=b.charAt(e)+d[0][1]:d.unshift([-1,b.charAt(e)]);g=-1;break}else if(a[h].hasOwnProperty?a[h].hasOwnProperty(e+","+(f-1)):void 0!==a[h][e+","+(f-1)]){f--;1===g?d[0][1]=c.charAt(f)+d[0][1]:d.unshift([1,c.charAt(f)]);g=1;break}else{e--;f--;if(b.charAt(e)!=c.charAt(f))throw Error("No diagonal.  Can't happen. (diff_path1)");
0===g?d[0][1]=b.charAt(e)+d[0][1]:d.unshift([0,b.charAt(e)]);g=0}return d}
function ob(a,b,c){for(var d=[],e=0,f=b.length,g=c.length,h=null,k=a.length-2;0<=k;k--)for(;;)if(a[k].hasOwnProperty?a[k].hasOwnProperty(f-1+","+g):void 0!==a[k][f-1+","+g]){f--; -1===h?d[e-1][1]+=b.charAt(b.length-f-1):d[e++]=[-1,b.charAt(b.length-f-1)];h=-1;break}else if(a[k].hasOwnProperty?a[k].hasOwnProperty(f+","+(g-1)):void 0!==a[k][f+","+(g-1)]){g--;1===h?d[e-1][1]+=c.charAt(c.length-g-1):d[e++]=[1,c.charAt(c.length-g-1)];h=1;break}else{f--;g--;if(b.charAt(b.length-f-1)!=c.charAt(c.length-
g-1))throw Error("No diagonal.  Can't happen. (diff_path2)");0===h?d[e-1][1]+=b.charAt(b.length-f-1):d[e++]=[0,b.charAt(b.length-f-1)];h=0}return d}function hb(a,b){if(!a||!b||a.charCodeAt(0)!==b.charCodeAt(0))return 0;for(var c=0,d=Math.min(a.length,b.length),e=d,f=0;c<e;)a.substring(f,e)==b.substring(f,e)?f=c=e:d=e,e=Math.floor((d-c)/2+c);return e}
function ib(a,b){if(!a||!b||a.charCodeAt(a.length-1)!==b.charCodeAt(b.length-1))return 0;for(var c=0,d=Math.min(a.length,b.length),e=d,f=0;c<e;)a.substring(a.length-e,a.length-f)==b.substring(b.length-e,b.length-f)?f=c=e:d=e,e=Math.floor((d-c)/2+c);return e}
function lb(a,b){function c(a,b,c){for(var d=a.substring(c,c+Math.floor(a.length/4)),e=-1,f="",g,h,C,v;-1!=(e=b.indexOf(d,e+1));){var w=hb(a.substring(c),b.substring(e)),y=ib(a.substring(0,c),b.substring(0,e));f.length<y+w&&(f=b.substring(e-y,e)+b.substring(e,e+w),g=a.substring(0,c-y),h=a.substring(c+w),C=b.substring(0,e-y),v=b.substring(e+w))}return f.length>=a.length/2?[g,h,C,v,f]:null}var d=a.length>b.length?a:b,e=a.length>b.length?b:a;if(10>d.length||1>e.length)return null;var f=c(d,e,Math.ceil(d.length/
4)),d=c(d,e,Math.ceil(d.length/2)),g;if(f||d)d?g=f?f[4].length>d[4].length?f:d:d:g=f;else return null;var h;a.length>b.length?(f=g[0],d=g[1],e=g[2],h=g[3]):(e=g[0],h=g[1],f=g[2],d=g[3]);return[f,d,e,h,g[4]]}function pb(a,b){for(var c=!1,d=[],e=0,f=null,g=0,h=0,k=0;g<b.length;)0==b[g][0]?(d[e++]=g,h=k,k=0,f=b[g][1]):(k+=b[g][1].length,null!==f&&f.length<=h&&f.length<=k&&(b.splice(d[e-1],0,[-1,f]),b[d[e-1]+1][0]=1,e--,e--,g=0<e?d[e-1]:-1,k=h=0,f=null,c=!0)),g++;c&&kb(a,b);qb(b)}
function qb(a){function b(a,b){if(!a||!b)return 5;var h=0;if(a.charAt(a.length-1).match(c)||b.charAt(0).match(c))if(h++,a.charAt(a.length-1).match(d)||b.charAt(0).match(d))if(h++,a.charAt(a.length-1).match(e)||b.charAt(0).match(e))h++,(a.match(f)||b.match(g))&&h++;return h}for(var c=/[^a-zA-Z0-9]/,d=/\s/,e=/[\r\n]/,f=/\n\r?\n$/,g=/^\r?\n\r?\n/,h=1;h<a.length-1;){if(0==a[h-1][0]&&0==a[h+1][0]){var k=a[h-1][1],l=a[h][1],n=a[h+1][1],r=ib(k,l);if(r)var u=l.substring(l.length-r),k=k.substring(0,k.length-
r),l=u+l.substring(0,l.length-r),n=u+n;for(var r=k,u=l,t=n,D=b(k,l)+b(l,n);l.charAt(0)===n.charAt(0);){var k=k+l.charAt(0),l=l.substring(1)+n.charAt(0),n=n.substring(1),E=b(k,l)+b(l,n);E>=D&&(D=E,r=k,u=l,t=n)}a[h-1][1]!=r&&(r?a[h-1][1]=r:(a.splice(h-1,1),h--),a[h][1]=u,t?a[h+1][1]=t:(a.splice(h+1,1),h--))}h++}}
function kb(a,b){b.push([0,""]);for(var c=0,d=0,e=0,f="",g="",h;c<b.length;)switch(b[c][0]){case 1:e++;g+=b[c][1];c++;break;case -1:d++;f+=b[c][1];c++;break;case 0:if(d||e){if(d&&e){if(h=hb(g,f))0<c-d-e&&0==b[c-d-e-1][0]?b[c-d-e-1][1]+=g.substring(0,h):(b.splice(0,0,[0,g.substring(0,h)]),c++),g=g.substring(h),f=f.substring(h);if(h=ib(g,f))b[c][1]=g.substring(g.length-h)+b[c][1],g=g.substring(0,g.length-h),f=f.substring(0,f.length-h)}d?e?b.splice(c-d-e,d+e,[-1,f],[1,g]):b.splice(c-d-e,d+e,[-1,f]):
b.splice(c-d-e,d+e,[1,g]);c=c-d-e+(d?1:0)+(e?1:0)+1}else c&&0==b[c-1][0]?(b[c-1][1]+=b[c][1],b.splice(c,1)):c++;d=e=0;g=f=""}""===b[b.length-1][1]&&b.pop();d=!1;for(c=1;c<b.length-1;)0==b[c-1][0]&&0==b[c+1][0]&&(b[c][1].substring(b[c][1].length-b[c-1][1].length)==b[c-1][1]?(b[c][1]=b[c-1][1]+b[c][1].substring(0,b[c][1].length-b[c-1][1].length),b[c+1][1]=b[c-1][1]+b[c+1][1],b.splice(c-1,1),d=!0):b[c][1].substring(0,b[c+1][1].length)==b[c+1][1]&&(b[c-1][1]+=b[c+1][1],b[c][1]=b[c][1].substring(b[c+1][1].length)+
b[c+1][1],b.splice(c+1,1),d=!0)),c++;d&&kb(a,b)};function X(a,b){return{type:0,at:a,value:b}}function Y(a,b){return{type:1,at:a,value:b}}
var rb=[function(a,b){var c=a.load,d=c.at,e=b.load,f=e.at,e=e.value.length;return d>f||d==f&&a.siteId>b.siteId?X(d+e,c.value):c},function(a,b){var c=a.load,d=c.at,e=b.load,f=e.at,e=e.value.length;return d>f?d>=f+e?X(d-e,c.value):null:c},function(a,b){var c=a.load,d=c.at,e=c.value,f=b.load,g=f.at,f=f.value,h=f.length;return d>=g?Y(d+h,e):d+e.length>g?(e=e.substring(0,g-d)+f+e.substring(g-d),Y(d,e)):c},function(a,b){var c=a.load,d=c.at,e=c.value,f=d+e.length-1,g=b.load,h=g.at,g=g.value.length,k=h+g-
1,l=Math.max(h,d),n=Math.min(k,f);if(l<=n){if(l==d&&n==f)return null;e=e.substring(0,l-d)+e.substring(n+1-d);return Y(Math.min(d,h),e)}return d>k?Y(d-g,e):c}],sb=[function(a){return Y(a.load.at,a.load.value)},function(a){return X(a.load.at,a.load.value)}];function tb(a,b){var c=b.load;if(c){c=ub[c.type];if(!c)throw"Wrong operations passed to an exec function.";a=c(a,b)}return a}
var ub=[function(a,b){var c=b.load,d=c.at;return a.substring(0,d)+c.value+a.substring(d)},function(a,b){var c=b.load,d=c.at;return a.substring(0,d)+a.substring(d+c.value.length)}];function vb(a,b,c){var d=b.load;if(d){d=wb[d.type];if(!d)throw"Wrong operations passed to a moveCursor function.";a=d(a,b,c)}return a}var wb=[function(a,b,c){var d=b.load,e=d.at,d=d.value.length;return a>e||a==e&&b.siteId<c?a+d:a},function(a,b){var c=b.load,d=c.at,c=c.value.length;return a>d?Math.max(d,a-c):a}],Z={};
z("insert",X,Z);z("remove",Y,Z);z("transform",function(a,b){var c=a.load,d=b.load;if(!c||!d)return c;c=rb[c.type<<1|d.type];if(!c)throw"Wrong operations passed to a transformation function.";return c(a,b)},Z);z("invert",function(a){var b=a.load;if(!b)return b;b=sb[b.type];if(!b)throw"Wrong operations passed to an inversion function.";return b(a)},Z);z("exec",function(a,b){if(b)if(B(b))for(var c=0;c<b.length;c++)a=tb(a,b[c]);else a=tb(a,b);return a},Z);
z("moveCursor",function(a,b,c){if(b)if(B(b))for(var d=0;d<b.length;d++)a=vb(a,b[d],c);else a=vb(a,b,c);return a},Z);z("genOps",function(a,b){var c=new fb,d=gb(c,a,b);pb(c,d);for(var c=0,e=[],f,g=0;g<d.length;g++){var h=d[g];f=h[0];var k=h[1],h=k.length;f?(-1==f?f=Y(c,k):(f=X(c,k),c+=h),e.push(f)):c+=h}return e},Z);z("OpType.INSERT",0,Z);z("OpType.REMOVE",1,Z);z("ops.string",Z,K);z("collaborative",K,void 0);z("cljs",K,void 0);}).call(this);
